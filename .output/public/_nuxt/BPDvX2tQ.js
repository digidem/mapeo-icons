import{_ as f,c as u,o as c,a as h,B as d,k as w,j as x,C as H,af as $,i as L,t as E,l as R,F,z as _,a4 as y,b as k,q as B}from"./DNd1LxcY.js";const b={methods:{setColorValue(e){let t={r:0,g:0,b:0,a:1};/#/.test(e)?t=this.hex2rgb(e):/rgb/.test(e)?t=this.rgb2rgba(e):typeof e=="string"?t=this.rgb2rgba(`rgba(${e})`):Object.prototype.toString.call(e)==="[object Object]"&&(t=e);const{r,g:n,b:i,a:s}=t,{h:o,s:l,v:a}=this.rgb2hsv(t);return{r,g:n,b:i,a:s===void 0?1:s,h:o,s:l,v:a}},createAlphaSquare(e){const t=document.createElement("canvas"),r=t.getContext("2d"),n=e*2;return t.width=n,t.height=n,r.fillStyle="#ffffff",r.fillRect(0,0,n,n),r.fillStyle="#ccd5db",r.fillRect(0,0,e,e),r.fillRect(e,e,e,e),t},createLinearGradient(e,t,r,n,i,s){const o=e==="l",l=t.createLinearGradient(0,0,o?r:0,o?0:n);l.addColorStop(.01,i),l.addColorStop(.99,s),t.fillStyle=l,t.fillRect(0,0,r,n)},rgb2hex({r:e,g:t,b:r},n){const i=o=>("0"+Number(o).toString(16)).slice(-2),s=`#${i(e)}${i(t)}${i(r)}`;return n?s.toUpperCase():s},hex2rgb(e){e=e.slice(1);const t=r=>parseInt(r,16)||0;return{r:t(e.slice(0,2)),g:t(e.slice(2,4)),b:t(e.slice(4,6))}},rgb2rgba(e){return typeof e=="string"?(e=(/rgba?\((.*?)\)/.exec(e)||["","0,0,0,1"])[1].split(","),{r:Number(e[0])||0,g:Number(e[1])||0,b:Number(e[2])||0,a:Number(e[3]?e[3]:1)}):e},rgb2hsv({r:e,g:t,b:r}){e=e/255,t=t/255,r=r/255;const n=Math.max(e,t,r),i=Math.min(e,t,r),s=n-i;let o=0;n===i?o=0:n===e?t>=r?o=60*(t-r)/s:o=60*(t-r)/s+360:n===t?o=60*(r-e)/s+120:n===r&&(o=60*(e-t)/s+240),o=Math.floor(o);let l=parseFloat((n===0?0:1-i/n).toFixed(2)),a=parseFloat(n.toFixed(2));return{h:o,s:l,v:a}}}},O={mixins:[b],props:{color:{type:String,default:"#000000"},hsv:{type:Object,default:null},size:{type:Number,default:152}},data(){return{slideSaturationStyle:{}}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasSaturation,t=this.size,r=e.getContext("2d");e.width=t,e.height=t,r.fillStyle=this.color,r.fillRect(0,0,t,t),this.createLinearGradient("l",r,t,t,"#FFFFFF","rgba(255,255,255,0)"),this.createLinearGradient("p",r,t,t,"rgba(0,0,0,0)","#000000")},renderSlide(){this.slideSaturationStyle={left:this.hsv.s*this.size-5+"px",top:(1-this.hsv.v)*this.size-5+"px"}},selectSaturation(e){const{top:t,left:r}=this.$el.getBoundingClientRect(),n=e.target.getContext("2d"),i=o=>{let l=o.clientX-r,a=o.clientY-t;l<0&&(l=0),a<0&&(a=0),l>this.size&&(l=this.size),a>this.size&&(a=this.size),this.slideSaturationStyle={left:l-5+"px",top:a-5+"px"};const g=n.getImageData(Math.min(l,this.size-1),Math.min(a,this.size-1),1,1),[m,p,v]=g.data;this.$emit("selectSaturation",{r:m,g:p,b:v})};i(e);const s=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)}}},T={ref:"canvasSaturation"};function D(e,t,r,n,i,s){return c(),u("div",{class:"saturation",onMousedown:t[0]||(t[0]=w((...o)=>s.selectSaturation&&s.selectSaturation(...o),["prevent","stop"]))},[h("canvas",T,null,512),h("div",{style:d(i.slideSaturationStyle),class:"slide"},null,4)],32)}const V=f(O,[["render",D]]),I={props:{hsv:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},data(){return{slideHueStyle:{}}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasHue,t=this.width,r=this.height,n=e.getContext("2d");e.width=t,e.height=r;const i=n.createLinearGradient(0,0,0,r);i.addColorStop(0,"#FF0000"),i.addColorStop(.17*1,"#FF00FF"),i.addColorStop(.17*2,"#0000FF"),i.addColorStop(.17*3,"#00FFFF"),i.addColorStop(.17*4,"#00FF00"),i.addColorStop(.17*5,"#FFFF00"),i.addColorStop(1,"#FF0000"),n.fillStyle=i,n.fillRect(0,0,t,r)},renderSlide(){this.slideHueStyle={top:(1-this.hsv.h/360)*this.height-2+"px"}},selectHue(e){const{top:t}=this.$el.getBoundingClientRect(),r=e.target.getContext("2d"),n=s=>{let o=s.clientY-t;o<0&&(o=0),o>this.height&&(o=this.height),this.slideHueStyle={top:o-2+"px"};const l=r.getImageData(0,Math.min(o,this.height-1),1,1),[a,g,m]=l.data;this.$emit("selectHue",{r:a,g,b:m})};n(e);const i=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)}}},N={ref:"canvasHue"};function j(e,t,r,n,i,s){return c(),u("div",{class:"hue",onMousedown:t[0]||(t[0]=w((...o)=>s.selectHue&&s.selectHue(...o),["prevent","stop"]))},[h("canvas",N,null,512),h("div",{style:d(i.slideHueStyle),class:"slide"},null,4)],32)}const z=f(I,[["render",j]]),P={mixins:[b],props:{color:{type:String,default:"#000000"},rgba:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},data(){return{slideAlphaStyle:{},alphaSize:5}},watch:{color(){this.renderColor()},"rgba.a"(){this.renderSlide()}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const e=this.$refs.canvasAlpha,t=this.width,r=this.height,n=this.alphaSize,i=this.createAlphaSquare(n),s=e.getContext("2d");e.width=t,e.height=r,s.fillStyle=s.createPattern(i,"repeat"),s.fillRect(0,0,t,r),this.createLinearGradient("p",s,t,r,"rgba(255,255,255,0)",this.color)},renderSlide(){this.slideAlphaStyle={top:this.rgba.a*this.height-2+"px"}},selectAlpha(e){const{top:t}=this.$el.getBoundingClientRect(),r=i=>{let s=i.clientY-t;s<0&&(s=0),s>this.height&&(s=this.height);let o=parseFloat((s/this.height).toFixed(2));this.$emit("selectAlpha",o)};r(e);const n=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)}}},M={ref:"canvasAlpha"};function Y(e,t,r,n,i,s){return c(),u("div",{class:"color-alpha",onMousedown:t[0]||(t[0]=w((...o)=>s.selectAlpha&&s.selectAlpha(...o),["prevent","stop"]))},[h("canvas",M,null,512),h("div",{style:d(i.slideAlphaStyle),class:"slide"},null,4)],32)}const G=f(P,[["render",Y]]),J={mixins:[b],props:{color:{type:String,default:"#000000"},width:{type:Number,default:100},height:{type:Number,default:30}},data(){return{alphaSize:5}},watch:{color(){this.renderColor()}},mounted(){this.renderColor()},methods:{renderColor(){const e=this.$el,t=this.width,r=this.height,n=this.alphaSize,i=this.createAlphaSquare(n),s=e.getContext("2d");e.width=t,e.height=r,s.fillStyle=s.createPattern(i,"repeat"),s.fillRect(0,0,t,r),s.fillStyle=this.color,s.fillRect(0,0,t,r)}}};function K(e,t,r,n,i,s){return c(),u("canvas")}const W=f(J,[["render",K]]),X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAlBJREFUOBGNkk2IUlEUx+99vufXQvCjEA11YWgk7TTLZhwVLTfSRmY1QbOoTdMqad0iiGB20cpVUAt3SVHCJDJG40IXBVGLIIOB8hM/QPy+/a/xYqK38MJ99757zu9/zj3nUrLmiEajdkEQni6Xy6hKpfqB/eNCofCMrsOHQiEPgPfwtdhsNkYpJe12m0LolkpJIJFI7DkcDm+9Xv/o9/vPw+dwsVhYnE4nc7lc1G63016vx8bj8TlRSWA6nd6cz+cXAoHAGYD3sDdarVam1+vpaDRaITgjjLHTigKArkK9ifXhbDYjBoOBSZL0F261Wqzb7VKtVvtBUQCwi4N88kjD4ZAg+ioyT53DGo3mJwLs/VcD3PkyrnAwmUwks9n8YDAYuPBvxGQASL/fp8imiwJeKZVK3/4R4DAicliLIt4pFosvsH9Vq9Wu4b5GCHC4j+hb5XL5C09JWOWFTzAY3MJyAAHJ7XbfRo9fclsmk2maTKY8IhJRFAna+QTwJ27jYyUQDofj6O1bPBLJ6/Xu5vP5N3/MhMC2gxrcReTvEGio1er7eFRR2S7EYrE40nsNWPB4PLu5XO6dbIxEIjuo+COkfAyfTZ1OF4dIHyJnZR8RkZ/zH5/PdyObzR7KhmQyud3pdFYw2rVRqVSOYePTIvvwVYDyKThUT8KpVGq70WjsI/Iv+HC4zp2VhoiiEP625ZFOp683m819iLZxtlGtVuuyTWmlePcM9x9A6DNWikd0EYJtdGPz6OjoqxJ08ox3oQzYgKtcwgwi7Q5athbMhX4DL0sglf8ys78AAAAASUVORK5CYII=",q={props:{suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:()=>[]}},data(){return{isOpenSucker:!1,suckerPreview:null,isSucking:!1}},watch:{suckerCanvas(e){this.isSucking=!1,this.suckColor(e),e.style.cursor=`url(${X}) 0 32, default`}},methods:{openSucker(){this.isOpenSucker?this.keydownHandler({keyCode:27}):(this.isOpenSucker=!0,this.isSucking=!0,this.$emit("openSucker",!0),document.addEventListener("keydown",this.keydownHandler))},keydownHandler(e){e.keyCode===27&&(this.isOpenSucker=!1,this.isSucking=!1,this.$emit("openSucker",!1),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("mousemove",this.mousemoveHandler),document.removeEventListener("mouseup",this.mousemoveHandler),this.suckerPreview&&(document.body.removeChild(this.suckerPreview),this.suckerPreview=null))},mousemoveHandler(e){const{clientX:t,clientY:r}=e,{top:n,left:i,width:s,height:o}=this.suckerCanvas.getBoundingClientRect(),l=t-i,a=r-n,m=this.suckerCanvas.getContext("2d").getImageData(Math.min(l,s-1),Math.min(a,o-1),1,1);let[p,v,A,C]=m.data;C=parseFloat((C/255).toFixed(2));const S=this.suckerPreview.style;Object.assign(S,{position:"absolute",left:t+20+"px",top:r-36+"px",width:"24px",height:"24px",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 8px 0 rgba(0, 0, 0, 0.16)",background:`rgba(${p}, ${v}, ${A}, ${C})`,zIndex:95}),t>=this.suckerArea[0]&&r>=this.suckerArea[1]&&t<=this.suckerArea[2]&&r<=this.suckerArea[3]?S.display="":S.display="none"},suckColor(e){e&&e.tagName!=="CANVAS"||(this.suckerPreview=document.createElement("div"),document.body.appendChild(this.suckerPreview),document.addEventListener("mousemove",this.mousemoveHandler),document.addEventListener("mouseup",this.mousemoveHandler),e.addEventListener("click",t=>{const{clientX:r,clientY:n}=t,{top:i,left:s,width:o,height:l}=e.getBoundingClientRect(),a=r-s,g=n-i,p=e.getContext("2d").getImageData(Math.min(a,o-1),Math.min(g,l-1),1,1);let[v,A,C,S]=p.data;S=parseFloat((S/255).toFixed(2)),this.$emit("selectSucker",{r:v,g:A,b:C,a:S})}))}}},U={key:1,class:"sucker",viewBox:"-16 -16 68 68",xmlns:"http://www.w3.org/2000/svg",stroke:"#9099a4"};function Q(e,t,r,n,i,s){return c(),u("div",null,[i.isSucking?x("",!0):(c(),u("svg",{key:0,class:H([{active:i.isOpenSucker},"sucker"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"-12 -12 48 48",onClick:t[0]||(t[0]=(...o)=>s.openSucker&&s.openSucker(...o))},[...t[1]||(t[1]=[h("path",{d:"M13.1,8.2l5.6,5.6c0.4,0.4,0.5,1.1,0.1,1.5s-1.1,0.5-1.5,0.1c0,0-0.1,0-0.1-0.1l-1.4-1.4l-7.7,7.7C7.9,21.9,7.6,22,7.3,22H3.1C2.5,22,2,21.5,2,20.9l0,0v-4.2c0-0.3,0.1-0.6,0.3-0.8l5.8-5.8C8.5,9.7,9.2,9.6,9.7,10s0.5,1.1,0.1,1.5c0,0,0,0.1-0.1,0.1l-5.5,5.5v2.7h2.7l7.4-7.4L8.7,6.8c-0.5-0.4-0.5-1-0.1-1.5s1.1-0.5,1.5-0.1c0,0,0.1,0,0.1,0.1l1.4,1.4l3.5-3.5c1.6-1.6,4.1-1.6,5.8-0.1c1.6,1.6,1.6,4.1,0.1,5.8L20.9,9l-3.6,3.6c-0.4,0.4-1.1,0.5-1.5,0.1"},null,-1)])],2)),i.isSucking?(c(),u("svg",U,[...t[2]||(t[2]=[$('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="4"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g></g>',1)])])):x("",!0)])}const Z=f(q,[["render",Q]]),ee={props:{name:{type:String,default:""},color:{type:String,default:""}},computed:{modelColor:{get(){return this.color},set(e){this.$emit("inputColor",e)}}}},te={class:"color-type"},se={class:"name"};function re(e,t,r,n,i,s){return c(),u("div",te,[h("span",se,E(r.name),1),L(h("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.modelColor=o),class:"value"},null,512),[[R,s.modelColor]])])}const ie=f(ee,[["render",re]]),oe={mixins:[b],props:{color:{type:String,default:"#000000"},colorsDefault:{type:Array,default:()=>[]},colorsHistoryKey:{type:String,default:""}},data(){return{imgAlphaBase64:"",colorsHistory:JSON.parse(localStorage.getItem(this.colorsHistoryKey))||[]}},created(){this.imgAlphaBase64=this.createAlphaSquare(4).toDataURL()},destroyed(){this.setColorsHistory(this.color)},methods:{selectColor(e){this.$emit("selectColor",e)},setColorsHistory(e){if(!e)return;const t=this.colorsHistory,r=t.indexOf(e);r>=0&&t.splice(r,1),t.length>=8&&(t.length=7),t.unshift(e),this.colorsHistory=t,localStorage.setItem(this.colorsHistoryKey,JSON.stringify(t))}}},ne={class:"colors"},le=["onClick"],ae={key:0,class:"colors history"},ce=["onClick"];function he(e,t,r,n,i,s){return c(),u("div",null,[h("ul",ne,[(c(!0),u(F,null,_(r.colorsDefault,o=>(c(),u("li",{key:o,class:"item",onClick:l=>s.selectColor(o)},[h("div",{style:d({background:`url(${i.imgAlphaBase64})`}),class:"alpha"},null,4),h("div",{style:d({background:o}),class:"color"},null,4)],8,le))),128))]),i.colorsHistory.length?(c(),u("ul",ae,[(c(!0),u(F,null,_(i.colorsHistory,o=>(c(),u("li",{key:o,class:"item",onClick:l=>s.selectColor(o)},[h("div",{style:d({background:`url(${i.imgAlphaBase64})`}),class:"alpha"},null,4),h("div",{style:d({background:o}),class:"color"},null,4)],8,ce))),128))])):x("",!0)])}const ue=f(oe,[["render",he]]),de={components:{Saturation:V,Hue:z,Alpha:G,Preview:W,Sucker:Z,Box:ie,Colors:ue},mixins:[b],props:{color:{type:String,default:"#000000"},theme:{type:String,default:"dark"},suckerHide:{type:Boolean,default:!0},suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:()=>[]},colorsDefault:{type:Array,default:()=>["#000000","#FFFFFF","#FF1900","#F47365","#FFB243","#FFE623","#6EFF2A","#1BC7B1","#00BEFF","#2E81FF","#5D61FF","#FF89CF","#FC3CAD","#BF3DCE","#8E00A7","rgba(0,0,0,0)"]},colorsHistoryKey:{type:String,default:"vue-colorpicker-history"}},data(){return{hueWidth:15,hueHeight:152,previewHeight:30,modelRgba:"",modelHex:"",r:0,g:0,b:0,a:1,h:0,s:0,v:0}},computed:{isLightTheme(){return this.theme==="light"},totalWidth(){return this.hueHeight+(this.hueWidth+8)*2},previewWidth(){return this.totalWidth-(this.suckerHide?0:this.previewHeight)},rgba(){return{r:this.r,g:this.g,b:this.b,a:this.a}},hsv(){return{h:this.h,s:this.s,v:this.v}},rgbString(){return`rgb(${this.r}, ${this.g}, ${this.b})`},rgbaStringShort(){return`${this.r}, ${this.g}, ${this.b}, ${this.a}`},rgbaString(){return`rgba(${this.rgbaStringShort})`},hexString(){return this.rgb2hex(this.rgba,!0)}},created(){Object.assign(this,this.setColorValue(this.color)),this.setText(),this.$watch("rgba",()=>{this.$emit("changeColor",{rgba:this.rgba,hsv:this.hsv,hex:this.modelHex})})},methods:{selectSaturation(e){const{r:t,g:r,b:n,h:i,s,v:o}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,h:i,s,v:o}),this.setText()},selectHue(e){const{r:t,g:r,b:n,h:i,s,v:o}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,h:i,s,v:o}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide()})},selectAlpha(e){this.a=e,this.setText()},inputHex(e){const{r:t,g:r,b:n,a:i,h:s,s:o,v:l}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,a:i,h:s,s:o,v:l}),this.modelHex=e,this.modelRgba=this.rgbaStringShort,this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},inputRgba(e){const{r:t,g:r,b:n,a:i,h:s,s:o,v:l}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,a:i,h:s,s:o,v:l}),this.modelHex=this.hexString,this.modelRgba=e,this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},setText(){this.modelHex=this.hexString,this.modelRgba=this.rgbaStringShort},openSucker(e){this.$emit("openSucker",e)},selectSucker(e){const{r:t,g:r,b:n,a:i,h:s,s:o,v:l}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,a:i,h:s,s:o,v:l}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},selectColor(e){const{r:t,g:r,b:n,a:i,h:s,s:o,v:l}=this.setColorValue(e);Object.assign(this,{r:t,g:r,b:n,a:i,h:s,s:o,v:l}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})}}},ge={class:"color-set"};function me(e,t,r,n,i,s){const o=y("Saturation"),l=y("Hue"),a=y("Alpha"),g=y("Preview"),m=y("Sucker"),p=y("Box"),v=y("Colors");return c(),u("div",{class:H(["hu-color-picker",{light:s.isLightTheme}]),style:d({width:s.totalWidth+"px"})},[h("div",ge,[k(o,{ref:"saturation",color:s.rgbString,hsv:s.hsv,size:i.hueHeight,onSelectSaturation:s.selectSaturation},null,8,["color","hsv","size","onSelectSaturation"]),k(l,{ref:"hue",hsv:s.hsv,width:i.hueWidth,height:i.hueHeight,onSelectHue:s.selectHue},null,8,["hsv","width","height","onSelectHue"]),k(a,{ref:"alpha",color:s.rgbString,rgba:s.rgba,width:i.hueWidth,height:i.hueHeight,onSelectAlpha:s.selectAlpha},null,8,["color","rgba","width","height","onSelectAlpha"])]),h("div",{style:d({height:i.previewHeight+"px"}),class:"color-show"},[k(g,{color:s.rgbaString,width:s.previewWidth,height:i.previewHeight},null,8,["color","width","height"]),r.suckerHide?x("",!0):(c(),B(m,{key:0,"sucker-canvas":r.suckerCanvas,"sucker-area":r.suckerArea,onOpenSucker:s.openSucker,onSelectSucker:s.selectSucker},null,8,["sucker-canvas","sucker-area","onOpenSucker","onSelectSucker"]))],4),k(p,{name:"HEX",color:i.modelHex,onInputColor:s.inputHex},null,8,["color","onInputColor"]),k(p,{name:"RGBA",color:i.modelRgba,onInputColor:s.inputRgba},null,8,["color","onInputColor"]),k(v,{color:s.rgbaString,"colors-default":r.colorsDefault,"colors-history-key":r.colorsHistoryKey,onSelectColor:s.selectColor},null,8,["color","colors-default","colors-history-key","onSelectColor"])],6)}const fe=f(de,[["render",me]]);export{fe as default};
